name=mongo-sink-classification-results
connector.class=com.mongodb.kafka.connect.MongoSinkConnector
topics=classification_results

connection.uri=mongodb://connect:XudtfxKsnpDHvk3LXW6eiuJfLSAZTz6t@mongo:27017/admin
server.api.version=1
database=domainradar
collection=classification_results

key.converter=org.apache.kafka.connect.storage.StringConverter
value.converter=org.apache.kafka.connect.json.JsonConverter
value.converter.schemas.enable=false

transforms=InsertTimestamp
transforms.InsertTimestamp.type=org.apache.kafka.connect.transforms.InsertField$Value
transforms.InsertTimestamp.timestamp.field=timestamp!

max.batch.size=5
bulk.write.ordered=false
tasks.max=1

# Add the _id field using the FullKey strategy (the whole key, previously transformed by our custom
# transformation, will be used as _id); then remove the "key" fields from the value
post.processor.chain=com.mongodb.kafka.connect.sink.processor.DocumentIdAdder,com.mongodb.kafka.connect.sink.processor.BlockListValueProjector
document.id.strategy=com.mongodb.kafka.connect.sink.processor.id.strategy.BsonOidStrategy

# The connector should never replace an existing document, so the InsertOne strategy can be used
writemodel.strategy=com.mongodb.kafka.connect.sink.writemodel.strategy.InsertOneDefaultStrategy
